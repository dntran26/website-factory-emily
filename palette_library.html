<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Website Factory ‚Äî Palette Library</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Syne:wght@700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --ui-bg: #0F1117;
  --ui-surface: #181C25;
  --ui-border: rgba(255,255,255,0.07);
  --ui-text: #E8EAF0;
  --ui-muted: #6B7280;
  --ui-accent: #57C0B3;
  --font-display: 'Syne', sans-serif;
  --font-body: 'DM Sans', sans-serif;
  --font-mono: 'DM Mono', monospace;
}
body { font-family: var(--font-body); background: var(--ui-bg); color: var(--ui-text); min-height: 100vh; line-height: 1.5; }

/* TOPBAR */
.topbar { background: var(--ui-surface); border-bottom: 1px solid var(--ui-border); padding: 0 2rem; display: flex; align-items: center; justify-content: space-between; height: 58px; position: sticky; top: 0; z-index: 200; }
.brand { display: flex; align-items: center; gap: 10px; }
.brand-dot { width: 9px; height: 9px; background: var(--ui-accent); border-radius: 50%; }
.brand-name { font-family: var(--font-display); font-size: 14px; font-weight: 800; color: var(--ui-text); }
.brand-sub { font-family: var(--font-mono); font-size: 10px; color: var(--ui-muted); margin-top: 1px; }
.topbar-right { display: flex; align-items: center; gap: 10px; }
.mode-toggle { background: rgba(255,255,255,0.05); border: 1px solid var(--ui-border); border-radius: 6px; padding: 5px 12px; font-size: 11px; font-weight: 600; color: var(--ui-muted); cursor: pointer; transition: all 0.2s; font-family: var(--font-body); }
.mode-toggle:hover { color: var(--ui-text); border-color: rgba(255,255,255,0.18); }
.mode-toggle.active { color: var(--ui-accent); border-color: var(--ui-accent); background: rgba(87,192,179,0.08); }
.count-badge { background: var(--ui-accent); color: #0F1117; font-family: var(--font-mono); font-size: 10px; font-weight: 500; padding: 2px 8px; border-radius: 4px; }
.back-link {
  font-size: 11px;
  font-weight: 600;
  color: #14B8C8;
  text-decoration: none;
  margin-right: 14px;
  display: inline-flex;
  align-items: center;
  opacity: 0.85;
  transition: all 0.2s ease;
}

.back-link:hover {
  opacity: 1;
  text-decoration: underline;
}

/* LAYOUT */
.layout { display: flex; min-height: calc(100vh - 58px); }
.sidebar { width: 215px; flex-shrink: 0; background: var(--ui-surface); border-right: 1px solid var(--ui-border); padding: 16px 0; position: sticky; top: 58px; height: calc(100vh - 58px); overflow-y: auto; }
.sidebar::-webkit-scrollbar { width: 3px; }
.sidebar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.08); border-radius: 2px; }
/* ‚îÄ‚îÄ SIDEBAR INTERACTIVE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.sb-group { border-bottom: 1px solid var(--ui-border); }
.sb-group:last-child { border-bottom: none; }

.sb-section {
  font-family: var(--font-mono); font-size: 9px; font-weight: 500;
  letter-spacing: 1.2px; color: var(--ui-muted); text-transform: uppercase;
  padding: 9px 12px 9px 16px;
  display: flex; align-items: center; justify-content: space-between;
  cursor: pointer; transition: all 0.16s; user-select: none;
}
.sb-section:hover { color: var(--ui-text); background: rgba(255,255,255,0.03); }
.sb-section.open { color: var(--ui-text); }
.sb-section-left { display: flex; align-items: center; gap: 7px; }
.sb-chevron { font-size: 9px; color: var(--ui-muted); transition: transform 0.22s ease; display: inline-block; line-height: 1; }
.sb-section.open .sb-chevron { transform: rotate(90deg); }
.sb-count { font-family: var(--font-mono); font-size: 9px; background: rgba(255,255,255,0.07); color: var(--ui-muted); padding: 1px 5px; border-radius: 3px; line-height: 1.6; }
.sb-group.active-group > .sb-section { color: var(--ui-accent); }
.sb-group.active-group .sb-count { background: rgba(87,192,179,0.15); color: var(--ui-accent); }

.sb-items { overflow: hidden; max-height: 0; transition: max-height 0.28s cubic-bezier(0.4,0,0.2,1); }
.sb-items.open { max-height: 600px; }

.sb-item {
  padding: 5px 12px 5px 28px;
  font-size: 11.5px; color: var(--ui-muted);
  cursor: pointer; display: flex; align-items: center;
  gap: 8px; transition: all 0.14s;
  border-left: 2px solid transparent;
  position: relative;
}
.sb-item::before {
  content: ''; position: absolute;
  left: 0; top: 0; bottom: 0; width: 2px;
  background: var(--sb-accent, var(--ui-accent));
  opacity: 0; transition: opacity 0.15s;
  border-radius: 0 2px 2px 0;
}
.sb-item:hover { color: var(--ui-text); background: rgba(255,255,255,0.03); }
.sb-item.active { color: var(--ui-text); background: rgba(87,192,179,0.05); }
.sb-item.active::before { opacity: 1; }
.sb-item:hover .sb-dot { transform: scale(1.35); }
.sb-item.active .sb-dot { transform: scale(1.25); }

.sb-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; transition: transform 0.15s; }
.sb-item-name { flex: 1; line-height: 1.3; }

.sb-header { padding: 12px 16px 10px; border-bottom: 1px solid var(--ui-border); margin-bottom: 4px; }
.sb-header-title { font-family: var(--font-mono); font-size: 9px; font-weight: 500; letter-spacing: 1.5px; text-transform: uppercase; color: var(--ui-muted); }
.sb-expand-all { font-family: var(--font-mono); font-size: 9px; color: var(--ui-muted); cursor: pointer; margin-top: 6px; transition: color 0.14s; display: inline-block; }
.sb-expand-all:hover { color: var(--ui-accent); }
.main { flex: 1; padding: 2.5rem 2rem; overflow-x: hidden; }

/* PAGE HEADING */
.page-heading { margin-bottom: 2rem; }
.page-heading h1 { font-family: var(--font-display); font-size: 26px; font-weight: 800; color: var(--ui-text); }
.page-heading p { font-size: 13px; color: var(--ui-muted); margin-top: 8px; max-width: 600px; line-height: 1.7; }
.meta-chips { display: flex; gap: 10px; margin-top: 12px; flex-wrap: wrap; }
.meta-chip { font-family: var(--font-mono); font-size: 10px; color: var(--ui-accent); background: rgba(87,192,179,0.09); border: 1px solid rgba(87,192,179,0.2); padding: 3px 10px; border-radius: 4px; }

/* FILTER BAR */
.filter-bar { display: flex; gap: 6px; margin-bottom: 2rem; flex-wrap: wrap; align-items: center; }
.filter-btn { padding: 5px 12px; border-radius: 5px; font-size: 11px; font-weight: 600; cursor: pointer; border: 1px solid var(--ui-border); background: transparent; color: var(--ui-muted); transition: all 0.14s; font-family: var(--font-body); }
.filter-btn:hover { color: var(--ui-text); border-color: rgba(255,255,255,0.18); }
.filter-btn.active { background: rgba(87,192,179,0.1); border-color: var(--ui-accent); color: var(--ui-accent); }
.filter-sep { width: 1px; height: 18px; background: var(--ui-border); margin: 0 2px; }
.search-wrap { position: relative; margin-left: auto; }
.search-input { background: rgba(255,255,255,0.05); border: 1px solid var(--ui-border); border-radius: 6px; padding: 5px 12px 5px 28px; font-size: 11px; color: var(--ui-text); width: 190px; font-family: var(--font-body); outline: none; transition: border-color 0.2s; }
.search-input:focus { border-color: var(--ui-accent); }
.search-icon { position: absolute; left: 9px; top: 50%; transform: translateY(-50%); font-size: 11px; color: var(--ui-muted); pointer-events: none; }

/* INDUSTRY SECTION */
.industry-section { margin-bottom: 3rem; }
.industry-header { display: flex; align-items: center; gap: 12px; margin-bottom: 1.4rem; padding-bottom: 12px; border-bottom: 1px solid var(--ui-border); }
.industry-icon { width: 34px; height: 34px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 15px; flex-shrink: 0; }
.industry-title { font-family: var(--font-display); font-size: 17px; font-weight: 800; color: var(--ui-text); }
.industry-sub { font-size: 11px; color: var(--ui-muted); margin-top: 2px; }
.industry-count { margin-left: auto; font-family: var(--font-mono); font-size: 10px; color: var(--ui-muted); }

/* THEME GRID */
.theme-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(360px, 1fr)); gap: 18px; }

/* THEME CARD */
.theme-card { background: var(--ui-surface); border: 1px solid var(--ui-border); border-radius: 12px; overflow: hidden; transition: border-color 0.2s, box-shadow 0.2s; }
.theme-card:hover { border-color: rgba(255,255,255,0.14); box-shadow: 0 4px 24px rgba(0,0,0,0.3); }
.theme-header { padding: 15px 17px 11px; display: flex; align-items: flex-start; justify-content: space-between; gap: 10px; }
.theme-name { font-family: var(--font-display); font-size: 14px; font-weight: 800; color: var(--ui-text); }
.theme-desc { font-size: 10px; color: var(--ui-muted); margin-top: 3px; line-height: 1.5; }
.variant-badge { font-family: var(--font-mono); font-size: 9px; padding: 2px 7px; border-radius: 3px; flex-shrink: 0; margin-top: 2px; }
.light-badge { background: rgba(255,255,255,0.08); color: #b0b8c4; }
.dark-badge  { background: rgba(0,0,0,0.5); color: #6B7280; border: 1px solid rgba(255,255,255,0.08); }

/* SWATCH BAR */
.swatch-bar { display: flex; height: 40px; margin: 0 17px 13px; border-radius: 7px; overflow: hidden; gap: 2px; }
.swatch-seg { flex: 1; position: relative; transition: flex 0.22s ease; cursor: default; }
.swatch-seg:hover { flex: 2.5; }
.swatch-lbl { position: absolute; bottom: 4px; left: 0; right: 0; text-align: center; font-family: var(--font-mono); font-size: 7px; opacity: 0; transform: translateY(3px); transition: all 0.18s; pointer-events: none; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.swatch-seg:hover .swatch-lbl { opacity: 1; transform: translateY(0); }

/* PREVIEW */
.theme-preview { margin: 0 17px 13px; border-radius: 7px; overflow: hidden; border: 1px solid rgba(255,255,255,0.06); }
.prev-nav { height: 28px; display: flex; align-items: center; padding: 0 10px; gap: 6px; }
.prev-nav-logo { font-size: 9px; font-weight: 800; font-family: var(--font-display); }
.prev-nav-links { display: flex; gap: 8px; margin-left: auto; }
.prev-nav-link { font-size: 7px; }
.prev-hero { padding: 12px 10px 10px; }
.prev-tag { font-size: 7px; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 4px; }
.prev-h { font-size: 12px; font-weight: 800; line-height: 1.3; margin-bottom: 5px; font-family: var(--font-display); }
.prev-p { font-size: 7.5px; line-height: 1.5; margin-bottom: 7px; }
.prev-btn { display: inline-block; font-size: 7px; font-weight: 700; padding: 4px 10px; border-radius: 3px; }
.prev-cards { display: flex; gap: 5px; padding: 0 10px 10px; }
.prev-card { flex: 1; border-radius: 4px; padding: 7px; }
.prev-card-h { font-size: 7.5px; font-weight: 700; margin-bottom: 2px; }
.prev-card-p { font-size: 6.5px; }

/* TOKEN TABLE */
.token-table { padding: 0 17px 13px; }
.token-row { display: flex; align-items: center; gap: 9px; padding: 4px 0; border-bottom: 1px solid rgba(255,255,255,0.04); cursor: pointer; transition: background 0.12s; border-radius: 3px; padding-left: 3px; }
.token-row:last-child { border-bottom: none; }
.token-row:hover { background: rgba(255,255,255,0.04); }
.token-dot { width: 13px; height: 13px; border-radius: 3px; flex-shrink: 0; border: 1px solid rgba(255,255,255,0.1); }
.token-name { font-family: var(--font-mono); font-size: 10px; color: var(--ui-accent); min-width: 148px; flex-shrink: 0; }
.token-hex { font-family: var(--font-mono); font-size: 10px; color: var(--ui-text); flex: 1; }
.token-desc { font-size: 9px; color: var(--ui-muted); text-align: right; }

/* SNIPPET TOGGLE + PANEL */
.snippet-toggle { display: flex; align-items: center; gap: 6px; margin: 0 17px 12px; padding: 5px 10px; background: rgba(255,255,255,0.03); border: 1px solid var(--ui-border); border-radius: 5px; font-size: 10px; color: var(--ui-muted); cursor: pointer; transition: all 0.14s; font-family: var(--font-mono); }
.snippet-toggle:hover { color: var(--ui-text); border-color: rgba(255,255,255,0.14); }
.snippet-toggle.open { color: var(--ui-accent); border-color: rgba(87,192,179,0.3); }
.css-snippet { margin: 0 17px 14px; background: rgba(0,0,0,0.35); border: 1px solid rgba(255,255,255,0.06); border-radius: 6px; padding: 10px 12px; display: none; }
.css-snippet.open { display: block; }
.css-snippet pre { font-family: var(--font-mono); font-size: 9.5px; color: #a8d8ea; line-height: 1.75; white-space: pre; }
.cs-sel { color: #F05F63; }
.cs-prop { color: var(--ui-accent); }
.cs-val { color: #F3D96A; }

/* TOAST */
.copy-toast { position: fixed; bottom: 22px; right: 22px; background: var(--ui-accent); color: #0F1117; font-family: var(--font-mono); font-size: 11px; font-weight: 500; padding: 7px 15px; border-radius: 6px; opacity: 0; transform: translateY(8px); transition: all 0.2s; pointer-events: none; z-index: 999; }
.copy-toast.show { opacity: 1; transform: translateY(0); }

@media(max-width:768px){ .sidebar{display:none} .theme-grid{grid-template-columns:1fr} }
</style>
</head>
<body>

<div class="topbar">
  <div class="brand">
    <a href="index.html" class="back-link">‚Üê Back</a>
    <div class="brand-dot"></div>
    <div>
      <div class="brand-name">Palette Library</div>
      <div class="brand-sub">Website Factory ¬∑ Design Tokens v1.0</div>
    </div>
  </div>
  <div class="topbar-right">
    <button class="mode-toggle active" onclick="setMode('light')" id="btn-light">‚òÄ Light</button>
    <button class="mode-toggle" onclick="setMode('dark')" id="btn-dark">‚óê Dark</button>
    <span class="count-badge">20 Themes</span>
  </div>
</div>

<div class="layout">
  <nav class="sidebar" id="sidebar"></nav>
  <main class="main">

    <div class="page-heading">
      <h1>Industry Palette Library</h1>
      <p>20 named themes across 8 industries. Each theme is a complete set of CSS design tokens using the Website Factory naming convention. Toggle between light and dark mode variants, click any hex to copy it, or expand the CSS snippet to copy the full token block.</p>
      <div class="meta-chips">
        <span class="meta-chip">20 Themes</span>
        <span class="meta-chip">8 Industries</span>
        <span class="meta-chip">7 Tokens √ó 2 Modes</span>
        <span class="meta-chip">280 Hex Values</span>
      </div>
    </div>

    <div class="filter-bar">
      <button class="filter-btn active" onclick="filterBy('all',this)">All Industries</button>
      <div class="filter-sep"></div>
      <button class="filter-btn" onclick="filterBy('trades',this)">üîß Trades</button>
      <button class="filter-btn" onclick="filterBy('law',this)">‚öñÔ∏è Law</button>
      <button class="filter-btn" onclick="filterBy('health',this)">üåø Health</button>
      <button class="filter-btn" onclick="filterBy('restaurant',this)">üçΩ Restaurant</button>
      <button class="filter-btn" onclick="filterBy('retail',this)">üõç Retail</button>
      <button class="filter-btn" onclick="filterBy('realestate',this)">üè† Real Estate</button>
      <button class="filter-btn" onclick="filterBy('professional',this)">üíº Professional</button>
      <button class="filter-btn" onclick="filterBy('creative',this)">üé® Creative</button>
      <div class="search-wrap">
        <span class="search-icon">‚åï</span>
        <input class="search-input" placeholder="Search themes‚Ä¶" oninput="searchBy(this.value)">
      </div>
    </div>

    <div id="content"></div>
  </main>
</div>

<div class="copy-toast" id="toast"></div>

<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// DATA
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const INDUSTRIES = [
  { id:'trades',       label:'Trades',               icon:'üîß', sub:'Plumbing ¬∑ HVAC ¬∑ Electrical ¬∑ Construction', clr:'#F6914F' },
  { id:'law',          label:'Law Firm',              icon:'‚öñÔ∏è', sub:'Solicitors ¬∑ Notaries ¬∑ Barristers',          clr:'#3875B1' },
  { id:'health',       label:'Health & Wellness',     icon:'üåø', sub:'Clinics ¬∑ Physio ¬∑ Yoga ¬∑ Nutrition',         clr:'#57C0B3' },
  { id:'restaurant',   label:'Restaurant & Cafe',     icon:'üçΩ', sub:'Dining ¬∑ Takeaway ¬∑ Catering ¬∑ Bakery',       clr:'#F05F63' },
  { id:'retail',       label:'Retail',                icon:'üõç', sub:'Boutique ¬∑ Fashion ¬∑ Lifestyle ¬∑ Gifts',      clr:'#F1A6A9' },
  { id:'realestate',   label:'Real Estate',           icon:'üè†', sub:'Agents ¬∑ Developers ¬∑ Property Management',   clr:'#2A5AAC' },
  { id:'professional', label:'Professional Services', icon:'üíº', sub:'Accountants ¬∑ Consultants ¬∑ HR ¬∑ Finance',    clr:'#6B7280' },
  { id:'creative',     label:'Creative Agency',       icon:'üé®', sub:'Marketing ¬∑ Design ¬∑ Digital ¬∑ Branding',    clr:'#F3D96A' },
];

const TOKENS = [
  { key:'primary',   label:'--color-primary',   desc:'Main brand colour'       },
  { key:'secondary', label:'--color-secondary',  desc:'Supporting colour'       },
  { key:'accent',    label:'--color-accent',     desc:'High-contrast call-out'  },
  { key:'bg',        label:'--color-bg',         desc:'Page background'         },
  { key:'surface',   label:'--color-surface',    desc:'Cards & elevated panels' },
  { key:'text',      label:'--color-text',       desc:'Primary body text'       },
  { key:'muted',     label:'--color-muted',      desc:'Secondary / captions'    },
];

const THEMES = [

  // ‚îÄ‚îÄ TRADES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:'industrial-steel', name:'Industrial Steel', industry:'trades',
    desc:'Heavy authority. Charcoal and steel blue for services that work in tough environments.',
    light:{ primary:'#1C2B3A', secondary:'#2E6DA4', accent:'#E8A020', bg:'#F4F6F8', surface:'#FFFFFF', text:'#1C2B3A', muted:'#6B7C8D' },
    dark: { primary:'#2E6DA4', secondary:'#5B9BD5', accent:'#F0B429', bg:'#0D1720', surface:'#162030', text:'#E8EDF2', muted:'#5A7080' } },

  { id:'high-vis-orange', name:'High-Vis Orange', industry:'trades',
    desc:'Safety-first urgency. High-visibility orange signals rapid availability ‚Äî ideal for emergency call-out.',
    light:{ primary:'#C95A00', secondary:'#2B2B2B', accent:'#FFB300', bg:'#FFFAF5', surface:'#FFFFFF', text:'#1A1A1A', muted:'#7A6A5A' },
    dark: { primary:'#F07020', secondary:'#E8E8E8', accent:'#FFD000', bg:'#141010', surface:'#201810', text:'#F5EDE0', muted:'#806050' } },

  { id:'workshop-slate', name:'Workshop Slate', industry:'trades',
    desc:'Grounded and honest. Warm slate with forest green ‚Äî for landscaping, carpentry and residential trades.',
    light:{ primary:'#3A4A3C', secondary:'#5C7A5E', accent:'#D4880A', bg:'#F5F5F0', surface:'#FFFFFF', text:'#2A3028', muted:'#7A8A7C' },
    dark: { primary:'#5C7A5E', secondary:'#8EAA90', accent:'#E8A020', bg:'#111510', surface:'#1A2018', text:'#E0E8E0', muted:'#607060' } },

  // ‚îÄ‚îÄ LAW ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:'chambers-dark', name:'Chambers Dark', industry:'law',
    desc:'Gravitas personified. Midnight navy and aged gold evoke the weight of the law ‚Äî commanding and timeless.',
    light:{ primary:'#1A1F3C', secondary:'#2C3E8C', accent:'#B8943C', bg:'#F8F7F3', surface:'#FFFFFF', text:'#1A1F3C', muted:'#7A7A8A' },
    dark: { primary:'#2C3E8C', secondary:'#4A60C0', accent:'#D4A840', bg:'#0C0E1A', surface:'#141828', text:'#EEF0F8', muted:'#525A7A' } },

  { id:'parchment-gold', name:'Parchment Gold', industry:'law',
    desc:'Heritage warmth. Cream and burnished gold suggest centuries of expertise ‚Äî ideal for family law and estates.',
    light:{ primary:'#5C4020', secondary:'#8C6030', accent:'#C08020', bg:'#FBF8F0', surface:'#FFFDF8', text:'#3C2810', muted:'#9A8870' },
    dark: { primary:'#C09050', secondary:'#E0B870', accent:'#F0D080', bg:'#180E04', surface:'#251808', text:'#F0E8D8', muted:'#806040' } },

  { id:'midnight-justice', name:'Midnight Justice', industry:'law',
    desc:'Precise and minimal. Near-black with a single cool accent for litigation firms projecting uncompromising confidence.',
    light:{ primary:'#0A0A14', secondary:'#1E2040', accent:'#3B8ACC', bg:'#F2F4F8', surface:'#FFFFFF', text:'#0A0A14', muted:'#8090A4' },
    dark: { primary:'#3B8ACC', secondary:'#5AA0E0', accent:'#80C4FF', bg:'#06080F', surface:'#0E1220', text:'#E4ECF8', muted:'#4A5A70' } },

  // ‚îÄ‚îÄ HEALTH & WELLNESS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:'clinical-mint', name:'Clinical Mint', industry:'health',
    desc:'Clean confidence. Cool mint and white communicate hygiene and professionalism for medical and allied health.',
    light:{ primary:'#007A6E', secondary:'#009B8C', accent:'#00C2B0', bg:'#F2FAF9', surface:'#FFFFFF', text:'#0D2926', muted:'#6AADA8' },
    dark: { primary:'#00C2B0', secondary:'#40D8CC', accent:'#7EEAE2', bg:'#051412', surface:'#0A201E', text:'#E0F5F3', muted:'#3A7A75' } },

  { id:'zen-sage', name:'Zen Sage', industry:'health',
    desc:'Earthy calm. Muted sage and natural stone tones ‚Äî the universal language of yoga, meditation and holistic wellness.',
    light:{ primary:'#4A6A50', secondary:'#6A8E70', accent:'#C8A060', bg:'#F5F4EE', surface:'#FFFFFF', text:'#2A3A2C', muted:'#8A9E8C' },
    dark: { primary:'#6A8E70', secondary:'#90B098', accent:'#E0B870', bg:'#101410', surface:'#182018', text:'#E0E8E0', muted:'#50705A' } },

  { id:'blush-therapy', name:'Blush Therapy', industry:'health',
    desc:'Gentle warmth. Soft blush and peach build emotional safety ‚Äî for counselling, mental health and beauty-adjacent wellness.',
    light:{ primary:'#8C5A60', secondary:'#C08A90', accent:'#E07050', bg:'#FDF7F6', surface:'#FFFFFF', text:'#4A2A2E', muted:'#B09095' },
    dark: { primary:'#C08A90', secondary:'#E0B0B8', accent:'#F09070', bg:'#180C0E', surface:'#281418', text:'#F5E8EA', muted:'#805060' } },

  // ‚îÄ‚îÄ RESTAURANT & CAFE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:'bistro-noir', name:'Bistro Noir', industry:'restaurant',
    desc:'Sophisticated dining. Inky black and warm cream with deep crimson ‚Äî instantly signals fine dining and culinary seriousness.',
    light:{ primary:'#1A0A0A', secondary:'#4A1020', accent:'#C02030', bg:'#FBF8F4', surface:'#FFFFFF', text:'#1A0A0A', muted:'#9A8880' },
    dark: { primary:'#C02030', secondary:'#E03040', accent:'#FF6070', bg:'#0D0505', surface:'#180C0C', text:'#F5EDE8', muted:'#704040' } },

  { id:'harvest-table', name:'Harvest Table', industry:'restaurant',
    desc:'Farm-to-table warmth. Terracotta and sunflower yellows suggest freshness, community and hearty honest cooking.',
    light:{ primary:'#8C4A28', secondary:'#C07040', accent:'#E8B020', bg:'#FDF8F0', surface:'#FFFDF8', text:'#2E1A0A', muted:'#A08060' },
    dark: { primary:'#D07840', secondary:'#E89850', accent:'#F0C840', bg:'#160C04', surface:'#241408', text:'#F5E8D0', muted:'#806040' } },

  // ‚îÄ‚îÄ RETAIL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:'boutique-blush', name:'Boutique Blush', industry:'retail',
    desc:'Curated femininity. Dusty rose and warm gold convey taste and curation for fashion boutiques and lifestyle brands.',
    light:{ primary:'#6A3A48', secondary:'#A06070', accent:'#D4A050', bg:'#FDF8F7', surface:'#FFFFFF', text:'#3A1A24', muted:'#B09090' },
    dark: { primary:'#C08090', secondary:'#E0A0B0', accent:'#F0C860', bg:'#160A0E', surface:'#241218', text:'#F5E8EC', muted:'#805060' } },

  { id:'modern-market', name:'Modern Market', industry:'retail',
    desc:'Bold and direct. High-contrast black with punchy yellow for streetwear, sports, and brands that value clarity.',
    light:{ primary:'#101010', secondary:'#303030', accent:'#E8C000', bg:'#F8F8F6', surface:'#FFFFFF', text:'#101010', muted:'#888888' },
    dark: { primary:'#E8C000', secondary:'#F0D040', accent:'#FFFFFF', bg:'#080808', surface:'#141414', text:'#F4F4F4', muted:'#505050' } },

  // ‚îÄ‚îÄ REAL ESTATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:'property-blue', name:'Property Blue', industry:'realestate',
    desc:'Trust and stability. Classic real estate blue with warm white and gold ‚Äî signals professionalism and financial confidence.',
    light:{ primary:'#1A3A6C', secondary:'#2A5AAC', accent:'#C8900A', bg:'#F5F7FA', surface:'#FFFFFF', text:'#0E1E3A', muted:'#7080A0' },
    dark: { primary:'#2A5AAC', secondary:'#4A80D8', accent:'#E8AA20', bg:'#060C18', surface:'#0E1828', text:'#E0E8F8', muted:'#404E6A' } },

  { id:'sandstone-prestige', name:'Sandstone Prestige', industry:'realestate',
    desc:'Warm luxury. Stone and sand tones with forest green ‚Äî for boutique agencies that want warmth over corporate coolness.',
    light:{ primary:'#5A4030', secondary:'#8A6848', accent:'#486840', bg:'#FAF7F3', surface:'#FFFFFF', text:'#2E2018', muted:'#A09080' },
    dark: { primary:'#C0A080', secondary:'#E0C0A0', accent:'#70A060', bg:'#140E08', surface:'#221808', text:'#F0E8D8', muted:'#706050' } },

  // ‚îÄ‚îÄ PROFESSIONAL SERVICES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:'slate-consulting', name:'Slate Consulting', industry:'professional',
    desc:'Measured authority. Cool charcoal with precise teal ‚Äî communicates analytical rigour for consulting and accounting firms.',
    light:{ primary:'#2A3440', secondary:'#3E5060', accent:'#1E8A88', bg:'#F4F6F8', surface:'#FFFFFF', text:'#1A2028', muted:'#7080A0' },
    dark: { primary:'#1E8A88', secondary:'#28AAAA', accent:'#50D0CC', bg:'#080C10', surface:'#101820', text:'#E0E8F0', muted:'#3A4E5E' } },

  { id:'warm-authority', name:'Warm Authority', industry:'professional',
    desc:'Personable expertise. Warm navy and amber ‚Äî for financial advisers and HR consultants who project both competence and approachability.',
    light:{ primary:'#2A2048', secondary:'#4A3880', accent:'#C87820', bg:'#F8F7F5', surface:'#FFFFFF', text:'#1A1630', muted:'#807890' },
    dark: { primary:'#6850C0', secondary:'#9080E0', accent:'#E8A030', bg:'#0A080F', surface:'#14101E', text:'#EEE8F8', muted:'#504568' } },

  { id:'coastal-advisory', name:'Coastal Advisory', industry:'professional',
    desc:'Calm confidence. Ocean blues and soft whites feel expansive and clear ‚Äî for advisory firms that want modern without cold.',
    light:{ primary:'#1A4860', secondary:'#2A7090', accent:'#2AA8B0', bg:'#F4F9FC', surface:'#FFFFFF', text:'#0E2838', muted:'#6898B0' },
    dark: { primary:'#2AA8B0', secondary:'#3CCAD0', accent:'#60E0E8', bg:'#050E14', surface:'#0C1C28', text:'#E0F0F8', muted:'#306878' } },

  // ‚îÄ‚îÄ CREATIVE AGENCY ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:'studio-ink', name:'Studio Ink', industry:'creative',
    desc:'Editorial power. Near-black with a single vivid coral ‚Äî the visual language of design studios where work speaks louder than decoration.',
    light:{ primary:'#0D0D0D', secondary:'#282828', accent:'#E83050', bg:'#F6F6F5', surface:'#FFFFFF', text:'#0D0D0D', muted:'#9A9A9A' },
    dark: { primary:'#E83050', secondary:'#FF5070', accent:'#FF8090', bg:'#080808', surface:'#121212', text:'#F4F4F4', muted:'#505050' } },

  { id:'neon-loft', name:'Neon Loft', industry:'creative',
    desc:'Energetic maximalism. Electric purple and lime on deep night ‚Äî for digital-first agencies working with tech, gaming and Gen Z brands.',
    light:{ primary:'#4A0080', secondary:'#7A20C0', accent:'#50C820', bg:'#F8F5FF', surface:'#FFFFFF', text:'#1A0030', muted:'#8A70A8' },
    dark: { primary:'#A040F0', secondary:'#C070FF', accent:'#80F030', bg:'#060010', surface:'#10001E', text:'#F0E8FF', muted:'#604888' } },
];

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// STATE
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let mode = 'light';
let filterVal = 'all';
let searchVal = '';

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// HELPERS
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function lum(hex) {
  const r=parseInt(hex.slice(1,3),16)/255, g=parseInt(hex.slice(3,5),16)/255, b=parseInt(hex.slice(5,7),16)/255;
  const lin=c=>c<=0.03928?c/12.92:Math.pow((c+0.055)/1.055,2.4);
  return 0.2126*lin(r)+0.7152*lin(g)+0.0722*lin(b);
}
function onHex(hex){ return lum(hex)>0.35?'#111111':'#FFFFFF'; }

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// CARD RENDERER
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function cardHTML(theme) {
  const t = theme[mode];
  const cssId = `css-${theme.id}-${mode}`;

  // swatch bar (5 swatches)
  const swatchKeys = ['primary','secondary','accent','bg','surface'];
  const swatchBar = swatchKeys.map(k=>`
    <div class="swatch-seg" style="background:${t[k]}" title="${k}: ${t[k]}">
      <div class="swatch-lbl" style="color:${onHex(t[k])};text-shadow:0 1px 3px rgba(0,0,0,.5)">${k}</div>
    </div>`).join('');

  // preview
  const btnClr = onHex(t.accent);
  const preview = `
    <div class="theme-preview">
      <div class="prev-nav" style="background:${t.primary}">
        <div class="prev-nav-logo" style="color:${onHex(t.primary)}">${theme.name.split(' ')[0]}</div>
        <div class="prev-nav-links">
          <span class="prev-nav-link" style="color:${onHex(t.primary)};opacity:.7">Services</span>
          <span class="prev-nav-link" style="color:${onHex(t.primary)};opacity:.7">About</span>
          <span class="prev-nav-link" style="color:${onHex(t.primary)};opacity:.7">Contact</span>
        </div>
      </div>
      <div class="prev-hero" style="background:${t.bg}">
        <div class="prev-tag" style="color:${t.secondary}">${theme.name.toUpperCase()}</div>
        <div class="prev-h" style="color:${t.text}">Your Business Name</div>
        <div class="prev-p" style="color:${t.muted}">Professional service delivered with care, expertise and a commitment to results.</div>
        <div class="prev-btn" style="background:${t.accent};color:${btnClr}">Get Started ‚Üí</div>
      </div>
      <div class="prev-cards" style="background:${t.bg}">
        ${['Services','About','Contact'].map((lbl,i)=>`
          <div class="prev-card" style="background:${t.surface};border-top:2px solid ${[t.primary,t.secondary,t.accent][i]}">
            <div class="prev-card-h" style="color:${t.text}">${lbl}</div>
            <div class="prev-card-p" style="color:${t.muted}">Brief description goes here.</div>
          </div>`).join('')}
      </div>
    </div>`;

  // token rows
  const rows = TOKENS.map(tk=>`
    <div class="token-row" onclick="copyVal('${t[tk.key]}')" title="Copy ${t[tk.key]}">
      <div class="token-dot" style="background:${t[tk.key]}"></div>
      <div class="token-name">${tk.label}</div>
      <div class="token-hex">${t[tk.key]}</div>
      <div class="token-desc">${tk.desc}</div>
    </div>`).join('');

  // css snippet
  const cssClass = `.theme-${theme.id}${mode==='dark'?'--dark':''}`;
  const cssLines = TOKENS.map(tk=>`  --color-${tk.key}: ${t[tk.key]};`).join('\n');
  const cssText = `${cssClass} {\n${cssLines}\n}`;

  return `
    <div class="theme-card" data-industry="${theme.industry}" data-name="${theme.name.toLowerCase()}">
      <div class="theme-header">
        <div>
          <div class="theme-name">${theme.name}</div>
          <div class="theme-desc">${theme.desc}</div>
        </div>
        <span class="variant-badge ${mode==='light'?'light-badge':'dark-badge'}">${mode==='light'?'‚òÄ LIGHT':'‚óê DARK'}</span>
      </div>
      <div class="swatch-bar">${swatchBar}</div>
      ${preview}
      <div class="token-table">${rows}</div>
      <div class="snippet-toggle" onclick="toggleSnippet('${cssId}',this)">
        <span>{ }</span>&nbsp;Copy CSS tokens
      </div>
      <div class="css-snippet" id="${cssId}" data-css="${encodeURIComponent(cssText)}">
        <pre><span class="cs-sel">${cssClass}</span> {
${TOKENS.map(tk=>`  <span class="cs-prop">--color-${tk.key}:</span> <span class="cs-val">${t[tk.key]}</span>;`).join('\n')}
}</pre>
      </div>
    </div>`;
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// FULL RENDER
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function render() {
  const container = document.getElementById('content');
  let html = '';
  INDUSTRIES.forEach(ind => {
    if (filterVal !== 'all' && filterVal !== ind.id) return;
    const themes = THEMES.filter(t => {
      if (t.industry !== ind.id) return false;
      if (searchVal && !t.name.toLowerCase().includes(searchVal) && !ind.label.toLowerCase().includes(searchVal)) return false;
      return true;
    });
    if (!themes.length) return;
    html += `
      <div class="industry-section" id="ind-${ind.id}">
        <div class="industry-header">
          <div class="industry-icon" style="background:${ind.clr}22;border:1px solid ${ind.clr}44">${ind.icon}</div>
          <div>
            <div class="industry-title">${ind.label}</div>
            <div class="industry-sub">${ind.sub}</div>
          </div>
          <div class="industry-count">${themes.length} theme${themes.length!==1?'s':''}</div>
        </div>
        <div class="theme-grid">${themes.map(t=>cardHTML(t)).join('')}</div>
      </div>`;
  });
  if (!html) html = `<div style="text-align:center;padding:60px;color:var(--ui-muted);font-family:var(--font-mono)">No themes found.</div>`;
  container.innerHTML = html;
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// SIDEBAR ‚Äî Interactive with collapse, active state, scroll spy
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

let sbOpenGroups = new Set(INDUSTRIES.map(i=>i.id)); // all open by default
let sbActiveItem = null;
let sbObserver = null;

function renderSidebar() {
  const sb = document.getElementById('sidebar');

  let html = `<div class="sb-header">
    <div class="sb-header-title">Industries</div>
    <div class="sb-expand-all" id="sb-expand-btn" onclick="sbToggleAll()">Collapse all ‚ñ≤</div>
  </div>`;

  INDUSTRIES.forEach(ind => {
    const themes = THEMES.filter(t => t.industry === ind.id);
    const isOpen = sbOpenGroups.has(ind.id);

    html += `<div class="sb-group" id="sbg-${ind.id}">
      <div class="sb-section ${isOpen ? 'open' : ''}" onclick="sbToggleGroup('${ind.id}')">
        <div class="sb-section-left">
          <span>${ind.icon}</span>
          <span>${ind.label}</span>
        </div>
        <div style="display:flex;align-items:center;gap:6px">
          <span class="sb-count">${themes.length}</span>
          <span class="sb-chevron">‚ñ∂</span>
        </div>
      </div>
      <div class="sb-items ${isOpen ? 'open' : ''}" id="sbi-${ind.id}">
        ${themes.map(t => `
          <div class="sb-item" id="sbitem-${t.id}"
            style="--sb-accent:${t.light.primary}"
            onclick="sbNavigate('${t.id}', '${ind.id}', '${t.light.primary}')">
            <div class="sb-dot" style="background:${t.light.primary}"></div>
            <span class="sb-item-name">${t.name}</span>
          </div>`).join('')}
      </div>
    </div>`;
  });

  sb.innerHTML = html;
  sbInitScrollSpy();
}

function sbToggleGroup(indId) {
  const section = document.querySelector(`#sbg-${indId} .sb-section`);
  const items   = document.getElementById(`sbi-${indId}`);
  if (!section || !items) return;

  const isOpen = items.classList.contains('open');
  if (isOpen) {
    sbOpenGroups.delete(indId);
    items.classList.remove('open');
    section.classList.remove('open');
  } else {
    sbOpenGroups.add(indId);
    items.classList.add('open');
    section.classList.add('open');
  }
  // update expand-all label
  const allOpen = INDUSTRIES.every(i => sbOpenGroups.has(i.id));
  const btn = document.getElementById('sb-expand-btn');
  if (btn) btn.textContent = allOpen ? 'Collapse all ‚ñ≤' : 'Expand all ‚ñº';
}

function sbToggleAll() {
  const allOpen = INDUSTRIES.every(i => sbOpenGroups.has(i.id));
  INDUSTRIES.forEach(ind => {
    const section = document.querySelector(`#sbg-${ind.id} .sb-section`);
    const items   = document.getElementById(`sbi-${ind.id}`);
    if (!section || !items) return;
    if (allOpen) {
      sbOpenGroups.delete(ind.id);
      items.classList.remove('open');
      section.classList.remove('open');
    } else {
      sbOpenGroups.add(ind.id);
      items.classList.add('open');
      section.classList.add('open');
    }
  });
  const btn = document.getElementById('sb-expand-btn');
  if (btn) btn.textContent = allOpen ? 'Expand all ‚ñº' : 'Collapse all ‚ñ≤';
}

function sbNavigate(themeId, indId, accentHex) {
  // Mark active
  document.querySelectorAll('.sb-item').forEach(el => el.classList.remove('active'));
  const activeEl = document.getElementById(`sbitem-${themeId}`);
  if (activeEl) {
    activeEl.classList.add('active');
    activeEl.style.setProperty('--sb-accent', accentHex);
  }
  // Mark active group
  document.querySelectorAll('.sb-group').forEach(g => g.classList.remove('active-group'));
  const group = document.getElementById(`sbg-${indId}`);
  if (group) group.classList.add('active-group');

  // Scroll main content ‚Äî jump to the industry section, then find the theme card
  // Ensure the group is open first
  if (!sbOpenGroups.has(indId)) sbToggleGroup(indId);

  // Find the theme card by searching for a card with this theme id in its snippet id
  const snippetEl = document.getElementById(`css-${themeId}-${mode}`);
  if (snippetEl) {
    const card = snippetEl.closest('.theme-card');
    if (card) {
      const topOffset = 80; // topbar + some breathing room
      const y = card.getBoundingClientRect().top + window.scrollY - topOffset;
      window.scrollTo({ top: y, behavior: 'smooth' });

      // Pulse the card
      card.style.transition = 'box-shadow 0.3s, border-color 0.3s';
      card.style.boxShadow = `0 0 0 2px ${accentHex}88`;
      card.style.borderColor = accentHex + '88';
      setTimeout(() => {
        card.style.boxShadow = '';
        card.style.borderColor = '';
      }, 1600);
      return;
    }
  }

  // Fallback: scroll to industry section header
  const indSection = document.getElementById(`ind-${indId}`);
  if (indSection) {
    const y = indSection.getBoundingClientRect().top + window.scrollY - 80;
    window.scrollTo({ top: y, behavior: 'smooth' });
  }

  sbActiveItem = themeId;
}

// ‚îÄ‚îÄ SCROLL SPY ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// Watches industry sections and highlights the matching sidebar group as you scroll
function sbInitScrollSpy() {
  if (sbObserver) sbObserver.disconnect();

  sbObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting) return;
      const indId = entry.target.id.replace('ind-', '');
      // Highlight the group
      document.querySelectorAll('.sb-group').forEach(g => g.classList.remove('active-group'));
      const group = document.getElementById(`sbg-${indId}`);
      if (group) group.classList.add('active-group');
      // Scroll sidebar to keep it in view
      const sbSection = group ? group.querySelector('.sb-section') : null;
      if (sbSection) sbSection.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
    });
  }, {
    rootMargin: '-10% 0px -70% 0px',
    threshold: 0
  });

  document.querySelectorAll('.industry-section').forEach(sec => {
    sbObserver.observe(sec);
  });
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// INTERACTIONS
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function setMode(m) {
  mode = m;
  document.getElementById('btn-light').classList.toggle('active', m==='light');
  document.getElementById('btn-dark').classList.toggle('active', m==='dark');
  render();
  sbInitScrollSpy();
}
function filterBy(v, btn) {
  filterVal = v;
  document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  render();
  sbInitScrollSpy();
}
function searchBy(v) { searchVal = v.toLowerCase().trim(); render(); sbInitScrollSpy(); }

function toggleSnippet(id, btn) {
  const el = document.getElementById(id);
  const open = el.classList.toggle('open');
  btn.classList.toggle('open', open);
  btn.querySelector('span').textContent = open ? '‚úï' : '{ }';
  if (open) {
    const raw = decodeURIComponent(el.dataset.css);
    navigator.clipboard.writeText(raw).catch(()=>{});
    toast('CSS snippet copied!');
  }
}
function copyVal(hex) {
  navigator.clipboard.writeText(hex).catch(()=>{});
  toast(`${hex} copied!`);
}
function toast(msg) {
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.classList.add('show');
  clearTimeout(el._t);
  el._t = setTimeout(()=>el.classList.remove('show'), 2000);
}
// scrollTo is now handled by sbNavigate above

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
renderSidebar();
render();
setTimeout(sbInitScrollSpy, 120);
</script>
</body>
</html>
